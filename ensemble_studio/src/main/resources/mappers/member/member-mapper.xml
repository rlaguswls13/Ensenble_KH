<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">
	<!-- mapper태그 namespace 속성 
		mapper 파일들을 구분하지 위한 별칭
	 -->
	 
	 <!-- resultMap : 조회된 Result Set의 컬럼명과 VO 필드명이 일치하지 않을 때
	 				  컬럼과 필드를 매핑 시키는 역할을 하는 태그
	 				  
	 	type : 매핑시킬 VO 풀네임(패키지+클래스명) 또는 등록된 별칭
	 	
	 	id : resultMap을 구분하는 문자열
	  -->
	 <resultMap type="Member" id="member_rm">
	 	<!-- 기본키(PK)에 해당하는 컬럼, 필드 매핑 -->
	 	<id property="memberNo" column="MEMBER_NO"/>
	 	
	 	<!-- 기본키 외의 컬럼, 필드 매핑 -->
	 	<result property="memberId" column="MEMBER_ID"/>
	 	<result property="memberPw" column="MEMBER_PW"/>
 		<result property="memberEmail" column="MEMBER_EMAIL"/>
 		<result property="memberNick" column="MEMBER_NICK"/>
 		<result property="memberImage" column="MEMBER_IMAGE"/>
 		<result property="memberPhone" column="MEMBER_PHONE"/>
 		<result property="enrollDate" column="ENROLL_DATE"/>
 		<result property="memberStatus" column="MEMBER_STATUS"/>
 		<result property="memberPath" column="MEMBER_PATH"/>
 		<result property="memberGrade" column="MEMBER_GRADE"/>	 
	 </resultMap>
	 
	 
	<!-- 일반 로그인 -->
	<select id="login" parameterType="string" resultMap="member_rm">
		SELECT * FROM MEMBER
		WHERE MEMBER_STATUS = 'Y'
		AND MEMBER_PATH = 'G'
		AND MEMBER_ID = #{memberId}
	</select>
	
	<!-- 아이디 중복 검사 -->
	<select id="idDupCheck" parameterType="string" resultType="_int">
		SELECT COUNT(*) FROM MEMBER
		WHERE MEMBER_STATUS = 'Y'
		AND MEMBER_ID = #{id}
	</select>
	
	<!-- 회원가입 -->
	<insert id="signUp" parameterType="Member">
		INSERT INTO MEMBER
		VALUES( SEQ_MNO.NEXTVAL, #{memberId}, #{memberPw}, #{memberEmail},
				#{memberNick}, DEFAULT, #{memberPhone}, DEFAULT, DEFAULT, 'G', DEFAULT)
	</insert>  
  
  
  
  
</mapper>
